{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{% block title %}Social Network{% endblock %}</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="{% static 'network/style.css' %}" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    </head>
    <body class="main_body">
        <nav class="social__navbar navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <div class="social__imagesmain">
                    <img class="social__images" src="static/network/mainlogo.jpg" alt="mainlogo" width=50>
                    <a class="layout__brand navbar-brand" href="{% url 'index' %}" style="font-size: 1.5rem; color: rgba(0, 0, 0, 0.55)">Mediafluent</a>
                </div>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                <ul class="navbar-nav social__nav ml-auto">
                    <!-- {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'profile' request.user.id %}" id="mainUser"><strong>{{ request.user.username }}</strong></a>
                    </li>
                    {% endif %} -->
                    
                    {% if user.is_authenticated %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'index' %}" id="all__post">All Posts</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'following' %}">Following</a>
                        </li>
                        <!-- <li class="nav-item">
                            <a class="nav-link" href="{% url 'profile' request.user.id %}" id="mainUser"><strong>{{ request.user.username }}</strong></a>
                        </li> -->
                        <!-- <li class="nav-item">
                            <div class="btn-group ">
                                <button class="" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    {{ request.user }}
                                </button>
                                <ul class="dropdown-menu">
                                    <li class="dropdown-item">
                                        <a class="nav-link" href="{% url 'logout' %}">Log Out</a>
                                    </li>
                                </ul>
                            </div>
                            
                        </li> -->
                        <li class="nav-item">
                            <div class="dropdown social__flex">
                                <div class="">
                                    <div class="social__image">
                                        {% if request.user.userProfile.Profile_pic %}
                                            <img class="main__image social__radius" id="Profile_pic" src="{{ request.user.userProfile.Profile_pic.url }}" alt="image" width=50>
                                        {% else %}
                                            <img class="main__image social__radius" id="Profile_pic" src="https://social.webestica.com/assets/images/avatar/placeholder.jpg" alt="image" width=50>
                                        {% endif %}
                                    </div>
                                </div>
                                <a class="nav-link social__flexuser dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" style="display: flex; align-items: center;;" aria-expanded="false">
                                    <p class="social__user">{{ request.user }}</p>
                                </a>
                                <ul class="dropdown-menu">
                                    <li class="dropdown-item"><a class="nav-link" href="{% url 'profile' request.user.id %}" id="mainUser">My Profile</a></li>
                                    <li class="dropdown-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
                                </ul>
                            </div>
                        </li>
                        
                        <!-- <div class="btn-group edit__button">
                            <button class="edit__buttondropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            ...
                            </button>
                            <ul class="dropdown-menu">
                                {% if inbox.users == request.user %}
                                    <li class="dropdown-item" id="inbox_{{ inbox.id }}" data-id="{{ inbox.id }}" data-bs-toggle="modal" data-bs-target="#staticBackdropedit{{ inbox.id }}">Edit post</li>
                                {% else %}
                                    <li class="dropdown-item">Cannot edit post</li>
                                {% endif %}
                            </ul>
                        </div> -->
                        <!-- <li class="nav-item">
                            <a class="nav-link" href="{% url 'logout' %}">Log Out</a>
                        </li> -->
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">Log In</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'register' %}">Register</a>
                        </li>
                    {% endif %}
                </ul>
              </div>
            </div>
        </nav>
        {% if messages %}
            {% for message in messages %}  
                <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
                    <strong>
                        {% if message.tags == 'alert-warning' %}
                            Error!
                        {% elif message.tags == 'alert-success' %}
                            Success!
                        {% else %}
                            Success!
                        {% endif %}

                    </strong> 
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}

        <div class="body">
            {% block body %}
            {% endblock %}
        </div>
        <script src="{% static 'network/index.js'%}" defer></script>
    </body>
    
</html>